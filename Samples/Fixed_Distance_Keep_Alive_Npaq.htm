<?xml version="1.0" encoding="Windows-1252"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="AeroBasic Programming|Example Programs|PSO Programming" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="HtmlHelp" MadCap:conditions="" MadCap:PathToHelpSystem="../" MadCap:HelpSystemFileName="A3200.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" /><title>Fixed Distance with Keep-Alive (Npaq only) Example</title>
        <link href="../SkinSupport/Slideshow.css" rel="stylesheet" />
        <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/Header.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/MasterPage_Footer.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/AerotechHelpStyles.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/Header.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/CodeEx.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/Note.css" rel="stylesheet" />
        <script src="../SkinSupport/jquery.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapGlobal.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapSlideshow.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapMerging.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapAliasFile.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapUtilities.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapBody.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapHighlighter.js" type="text/javascript">
        </script>
    </head>
    <body>
        <script type="text/javascript">
            <!--
			window.onbeforeprint = function(e) {
				var nodes = document.getElementsByTagName("*");
				for (var i = 0; i < nodes.length; i++ ) {			
					if (nodes[i].nodeType == 1)
					{
						var args = nodes[i].attributes;
						for (var j = 0; j < args.length; j++) {
						if ( args[j].name == "MadCap:targetName" )
						{
							nodes[i].setAttribute( "className", "MCTogglerBody" );
						}
						}
					}
				}
			}						
			-->
        </script>
        <table style="width: 100%;margin-left: -7px;margin-right: auto;mc-table-style: url('../Resources/TableStyles/Header.css');" cellspacing="0" MadCap:conditions="AerotechConditions.A3200Only" class="TableStyle-Header">
            <col class="TableStyle-Header-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Header-Body-Body1" style="height: 55px;">
                    <td style="background-repeat: no-repeat;vertical-align: top;background-image: url('../Resources/Images/Header/Header_A3200.png');background-position-y: top;padding-left: 0px;padding-right: 0px;padding-top: 0px;padding-bottom: 0px;border-left-style: none;border-right-style: none;border-top-style: none;border-bottom-style: none;border-bottom-width: 1px;border-bottom-color: #dae3ea;" class="TableStyle-Header-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_MD_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../Programming_Overview.htm">AeroBasic Programming</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="Example_Programs.htm">Example Programs</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="skill__5.html">PSO Programming</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Fixed Distance with Keep-Alive (Npaq only)</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table><a name="kanchor2664"></a>
        <h1 MadCap:autonum=""><span class="autonumber"><span></span></span>Fixed Distance with Keep-Alive (Npaq only) Example</h1>
        <p>Before you run an <span class="AerotechVariablesSimpleName_AeroBasic">AeroBasic</span> example program, copy the example to your User Files directory. Copying the example makes sure that you have access to compile and run the program and prevents changes that you make from being overwritten if you install updated software.</p>
        <p>View the example program in <span class="AerotechVariablesSimpleName_A3200">A3200</span> <span class="AerotechVariablesSimpleName_MotionComposer">Motion Composer</span>. <span class="AerotechVariablesSimpleName_MotionComposer">Motion Composer</span> adds color in the code which makes it easier to read. For best results, do one of the following.</p>
        <ul>
            <li class="BulletLevel1" value="1">Open a new file in <span class="procedureTerm"><span class="AerotechVariablesSimpleName_MotionComposer">Motion Composer</span></span>. Copy and paste the code into the file.</li>
            <li class="noBulletLevel1">OR</li>
            <li class="BulletLevel1" value="2">To examine the source code, open the example program from your User Files directory. You might have to copy the example program from the \<span class="AerotechVariablesSimpleName_A3200">A3200</span>\Samples\<span class="AerotechVariablesSimpleName_AeroBasic">AeroBasic</span> folder first.</li>
        </ul>
        <p>This example is one of many example programs. For a complete list of examples, refer to <a href="Example_Programs.htm">Example Programs</a>.</p>
        <p>
            <MadCap:conditionalText MadCap:conditions="OutputTypeConditions.ScreenOnly">To see a list of available hardware manuals, refer to <a href="../Other_Documentation.htm" MadCap:conditions="AerotechConditions.Option_MainA3200">Other Documentation</a>.</MadCap:conditionalText>
        </p>
        <h3 MadCap:autonum=""><span class="autonumber"><span></span></span>Program Summary</h3>
        <table style="width: 650px;mc-table-style: url('../Resources/TableStyles/Note.css');margin-left: 0;margin-right: auto;" class="TableStyle_Note" cellspacing="0">
            <tbody>
                <tr>
                    <td class="TableStyle_Note_Body_0_0_RowEnd_ColEnd">
                        <p><span class="driveNote">Hardware:</span> This program applies only when used with the Npaq. It does not apply on the Npaq MR.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>This program demonstrates the use of the second PSO pulse generator along with single axis fixed-distance firing. The primary feedback for the X axis is tracked and a PSO firing event is generated each time the feedback increments by 1000 counts. The second pulse generator is used to generate "keep-alive" pulses for a laser when the main output is not firing. Two windows are used to define regions where no firing occurs, where firing is based on the "keep-alive" pulse generator, or where firing is based on the main pulse generator.</p>
        <p>
            <img src="../Resources/Images/Figure_FixedDistanceFiring_KeepAlive_Npaq.png" />
        </p>
        <table class="TableStyle-CodeEx" style="mc-table-style: url('../Resources/TableStyles/CodeEx.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0">
            <col style="width: 647px;" class="TableStyle-CodeEx-Column-Column1" />
            <tbody>
                <tr class="TableStyle-CodeEx-Body-Body1">
                    <td class="TableStyle-CodeEx-BodyA-Column1-Body1"><pre>'                  NpaqSecondPulseGenerator.pgm
'
' This sample demonstrates the use of the second pulse generator on the Npaq to generate
' "keep-alive" pulses for a laser when the output is not actively firing.  By using two
' independent windows, the output firing is broken into 5 regions with different behaviors.
' The first window defines the area for active PSO firing and is used to mask the output
' of the main pulse generator to perform fixed-distance firing.  The second window defines
' the area for the keep-alive pulses and is used with the second pulse generator.  The
' output of the second window is inverted so that the keep-alive pulses are generated when
' the axis is OUTSIDE the window instead of inside the window (which is the normal case).
'
' Region 1: Less than 5000 counts
'   In this region, we are outside of both windows, and the output of the second pulse 
'   generator is used to generate a continuous pulse stream at a relatively low frequency
'   to act as a keep-alive signal for a laser.
' Region 2: Between 5000 and 10000 counts
'   In this region, no firing occurs because we are inside window 2 (which disables the
'   keep-alive signal) but not yet inside window 1.
' Region 3: Between 10000 and 16000 counts
'   In this region, we are inside window 1 and the output of the main pulse generator is
'   used in conjunction with fixed-distance tracking to generate pulses.
' Region 4: Between 16000 and 20000 counts
'   In this region, no firing occurs because we are inside window 2 (which disables the
'   keep-alive signal) but no longer inside window 1.
' Region 5: Greater than 20000 counts
'   In this region, we are outside of both windows, and the output of the second pulse 
'   generator is used to generate a continuous pulse stream at a relatively low frequency
'   to act as a keep-alive signal for a laser.

' NOTE: All PSO samples are written assuming 1000 counts per unit.
' NOTE: PSO pulse outputs are intentionally long so that the PSO output state can
'       be easily viewed using the "PSO Status" item in the Digital Scope.


' Enable and home the axis.
ENABLE X
HOME X

' Reset the PSO.  This resets the internal state of the PSO hardware, including the distance
' tracking counters and the window counters.
PSOCONTROL X RESET

' Configure the PSO for single axis tracking from the primary encoder input.
PSOTRACK X INPUT 0

' Configure the PSO to generate a firing event at a fixed distance.
PSODISTANCE X FIXED 1000

' Configure the main pulse generator by setting the total and off times and the number of cycles.
' This pulse generator will be triggered when a firing event occurs.
PSOPULSE X TIME 4000 2000 CYCLES 10

' Configure the second pulse generator by setting the total and off times.  This pulse generator
' will be triggered continuously and would typically be used as a "keep alive" signal for a laser.
PSOPULSE2 X TIME 50000 1000

' Configure both window 1 and window 2 to track the primary encoder input.
PSOWINDOW X 1 INPUT 0
PSOWINDOW X 2 INPUT 0

' Specify the upper and lower bounds (i.e., the range) for the two windows.
PSOWINDOW X 1 RANGE 10000 16000
PSOWINDOW X 2 RANGE 5000 20000

' Invert the polarity of window 2.  This means that the window output is high when the window
' counter value is less than the lower bound or greater than the upper bound (essentially the
' output is high when you are OUTSIDE of the window versus inside, which is the normal behavior).
PSOWINDOW X 2 ON INVERT

' Configure the windows to operate independently.
PSOWINDOW X CONTROL 1

' Configure the main PSO output (note the additional 0 after the axis letter) to come from
' the main pulse generator, but masked by the output of window 1.
PSOOUTPUT X 0 PULSE WINDOW MASK

' Configure the auxiliary PSO output (note the additional 1 after the axis letter) to come
' from the second pulse generator, but masked by the output of window 2.
PSOOUTPUT X 1 PULSE2 WINDOW MASK

' Combine the main and auxiliary outputs into one signal, which is then sent to the main output.
PSOOUTPUT X COMBINE 1

' Arm the PSO to start the distance tracking.
PSOCONTROL X ARM

' Move the axis so as to cause the PSO to fire.
LINEAR X 30 F 10

' Disable the PSO pulse generator.
PSOCONTROL X OFF

END PROGRAM</pre>
                    </td>
                </tr>
            </tbody>
        </table>
        <MadCap:pageFooter class="OddPage">
            <hr color="#006400" width="100%" size="0" align="center" />
            <table style="width: 100%;border-left-style: none;border-left-width: 1px;border-right-style: none;border-right-width: 1px;border-top-style: none;border-top-width: 1px;border-bottom-style: none;border-bottom-width: 1px;margin-left: 0;margin-right: auto;mc-table-style: url('../Resources/TableStyles/MasterPage_Footer.css');" class="TableStyle-MasterPage_Footer" cellspacing="0">
                <col class="Column-Column1" />
                <col class="Column-Column2" />
                <tbody>
                    <tr class="Body-Body1">
                        <td class="BodyB-Column1-Body1">
                            <p class="feedback">Was this information helpful?</p><a href="http://help.aerotech.com/feedback/?product=A3200&amp;type=help&amp;id=Fixed_Distance_Keep_Alive_Npaq.htm&amp;version=6.04.003&amp;helpful=yes" target="_blank"><div class="feedback"><p>Yes</p></div></a><a href="http://help.aerotech.com/feedback/?product=A3200&amp;type=help&amp;id=Fixed_Distance_Keep_Alive_Npaq.htm&amp;version=6.04.003&amp;helpful=no" target="_blank"><div class="feedback"><p>No</p></div></a>
                        </td>
                        <td class="BodyA-Column2-Body1" style="text-align: right;">
                            <p class="footer"><span class="AerotechVariablesCompanyName">Aerotech, Inc.</span>
                            </p>
                            <p class="trademarkandCopyright" style="text-align: right;" MadCap:conditions="AerotechConditions.A3200Only,AerotechConditions.A3200Programming,AerotechConditions.Option_LabVIEWA3200">Copyright <img src="../Resources/Images/Header/CopyrightSymbol.png" /> 2001-<span class="AerotechVariablesCurrentYear">2020</span></p>
                            <p class="footer"> All Rights Reserved </p>
                            <p class="footer"><a href="mailto:Support@aerotech.com" target="_blank" title="Support Email Address" alt="Support Email Address">Support@aerotech.com</a>
                            </p>
                            <p class="footer"><a href="http://www.aerotech.com/" target="_blank" title="http://www.aerotech.com" alt="http://www.aerotech.com"><span class="AerotechVariablesWebAddress">www.aerotech.com</span></a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </MadCap:pageFooter>
        <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>