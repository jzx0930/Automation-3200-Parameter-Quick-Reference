<?xml version="1.0" encoding="Windows-1252"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="AeroBasic Programming|Programming Notes|Motion" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="HtmlHelp" MadCap:PathToHelpSystem="" MadCap:HelpSystemFileName="A3200.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" /><title>QCOMMAND Features and Limitations</title>
        <link href="SkinSupport/Slideshow.css" rel="stylesheet" />
        <link href="SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="Resources/TableStyles/Header.css" rel="stylesheet" />
        <link href="Resources/TableStyles/MasterPage_Footer.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/AerotechHelpStyles.css" rel="stylesheet" />
        <link href="Resources/TableStyles/Header.css" rel="stylesheet" />
        <link href="Resources/TableStyles/Note.css" rel="stylesheet" />
        <link href="Resources/TableStyles/Warning.css" rel="stylesheet" />
        <script src="SkinSupport/jquery.js" type="text/javascript">
        </script>
        <script src="SkinSupport/MadCapGlobal.js" type="text/javascript">
        </script>
        <script src="SkinSupport/MadCapSlideshow.js" type="text/javascript">
        </script>
        <script src="SkinSupport/MadCapMerging.js" type="text/javascript">
        </script>
        <script src="SkinSupport/MadCapAliasFile.js" type="text/javascript">
        </script>
        <script src="SkinSupport/MadCapUtilities.js" type="text/javascript">
        </script>
        <script src="SkinSupport/MadCapBody.js" type="text/javascript">
        </script>
        <script src="SkinSupport/MadCapHighlighter.js" type="text/javascript">
        </script>
    </head>
    <body>
        <script type="text/javascript">
            <!--
			window.onbeforeprint = function(e) {
				var nodes = document.getElementsByTagName("*");
				for (var i = 0; i < nodes.length; i++ ) {			
					if (nodes[i].nodeType == 1)
					{
						var args = nodes[i].attributes;
						for (var j = 0; j < args.length; j++) {
						if ( args[j].name == "MadCap:targetName" )
						{
							nodes[i].setAttribute( "className", "MCTogglerBody" );
						}
						}
					}
				}
			}						
			-->
        </script>
        <table style="width: 100%;margin-left: -7px;margin-right: auto;mc-table-style: url('Resources/TableStyles/Header.css');" cellspacing="0" MadCap:conditions="AerotechConditions.A3200Only" class="TableStyle-Header">
            <col class="TableStyle-Header-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Header-Body-Body1" style="height: 55px;">
                    <td style="background-repeat: no-repeat;vertical-align: top;background-image: url('Resources/Images/Header/Header_A3200.png');background-position-y: top;padding-left: 0px;padding-right: 0px;padding-top: 0px;padding-bottom: 0px;border-left-style: none;border-right-style: none;border-top-style: none;border-bottom-style: none;border-bottom-width: 1px;border-bottom-color: #dae3ea;" class="TableStyle-Header-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_MD_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="Programming_Overview.htm">AeroBasic Programming</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="ProgrammingNotes/Constant_Torque.htm">Programming Notes</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="Motion_Overview.htm">Motion</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">QCOMMAND Features and Limitations</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <h1 MadCap:autonum=""><span class="autonumber"><span></span></span><a name="kanchor1013"></a>QCOMMAND Features and Limitations</h1>
        <table style="width: 650px;mc-table-style: url('Resources/TableStyles/Warning.css');margin-left: 0;margin-right: auto;" class="TableStyle-Warning" cellspacing="0">
            <col style="width: 50px;" class="TableStyle-Warning-Column-Column1" />
            <col class="TableStyle-Warning-Column-Column2" />
            <tbody>
                <tr class="TableStyle-Warning-Body-Body1">
                    <td class="TableStyle-Warning-BodyB-Column1-Body1" style="text-align: center;">
                        <img src="Resources/Images/Common/Symbol_Warning.png" />
                    </td>
                    <td class="TableStyle-Warning-BodyA-Column2-Body1">
                        <p><span class="warning">Warning:</span> If you use this command incorrectly, the axis can jerk and might cause damage to the equipment. Before you use this command on physical hardware, test it with simulated motion. Refer to <a href="Simulation_of_Motion.htm">Simulation of Motion</a>.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>The QCOMMAND command and functions supply access at the lowest level to the position and velocity commands sent to the drives. These values may be read, modified 
 and sent back to the drive to implement vector transformations. All program commands, operators, math functions, etc may be used by the program executing 
 the transformation. The position values are updated at a rate determined by the <a href="Parameters/MotionUpdateRate.html">MotionUpdateRate</a> task parameter. </p>
        <p>The QCOMMAND command and functions supply access to the motion data after all transformations 
 and acceleration limiting occur. Drive level limits and fault handling still apply however. The position values are 
 updated at a rate determined by the MotionUpdateRate task parameter. </p>
        <table class="TableStyle_Note" style="mc-table-style: url('Resources/TableStyles/Note.css');margin-left: 0;margin-right: auto;" cellspacing="0">
            <col style="width: 650px;" />
            <tbody>
                <tr>
                    <td class="TableStyle_Note_Body_0_0_RowEnd_ColEnd">
                        <p><span class="note">Note:</span> QCOMMANDs transform only RAPID, LINEAR, CW/CCW, and PVT motion.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>To make sure that execution completes correctly, put the transformation algorithm in a critical section that has CRITICAL&#160;START and CRITICAL&#160;END&#160;commands. The critical section forces the task to run, in the current time slice, all program lines that are necessary for the transformation. When the controller executes a CRITICAL&#160;END&#160;command, the executing task exits the critical section and goes back to normal task scheduling. To prevent starving the controller, issue a DWELL&#160;command with a value of 0.001 at the end of the transformation algorithm. This command causes the task to release its time slice.</p>
        <p>Use a <a href="Commands/QCOMMAND%20READ_Function.html">QCOMMAND READ</a> function in the transformation 
 program to obtain the next position and velocity record. You must specify the axes and task. If you want positions and velocities from axes in multiple tasks, execute one QCOMMAND READ function for each task.</p>
        <p>After transformation, use a <a href="Commands/QCOMMAND%20WRITE_Function.html">QCOMMAND WRITE</a> function to write your transformed data back to the task. You must specify the axes to which you are writing and the task. If you want to write positions 
 and velocities to axes in multiple tasks, execute one QCOMMAND WRITE function for each task. </p>
        <p>Each task coordinates motion independently, so if you write records to two tasks in the same transformation program, motion is not coordinated between the two tasks; however, motion within a given task is coordinated.</p>
        <p>During RAPID, LINEAR, or CW/CCW command motion, new position and velocity records are generated by the profile generator every "MotionUpdateRate" period. However, the transformation program executes every millisecond. 
 To prevent the program from a previous record, use the return values from the QCOMMAND READ and QCOMMAND WRITE functions. These commands return a unique ID for each time record processed. Use a variable to store the unique IDs from the last QCOMMAND WRITE function. 
 The unique ID will be -1 if no motion is being commanded on the task. </p>
        <p>Refer to <a href="Samples/Transformed_Motion.htm">Transformed Motion </a>for an example of how to use the QCOMMANDs.</p>
        <h3 MadCap:autonum=""><span class="autonumber"><span></span></span>Limitations</h3>
        <ul type="disc" class="ul_1">
            <li value="1">You must set MotionUpdateRate to 1 kHz or less in order for the QCOMMAND command and functions to work. The QCOMMAND command and functions will cause a task error if you set MotionUpdateRate to greater than 1 kHz.</li>
            <li value="2">QCOMMAND transforms only RAPID, LINEAR, CW/CCW, and PVT motion. Jogging, asynchronous motion, and slave motion are not transformed, nor is motion transformed when the axis is not moving. </li>
            <li value="3">If the maximum execution time of the transformation program exceeds the value of (1.0 / MotionUpdateRate) milliseconds, then the transformation 
cannot be calculated in the available time and the program will have an adverse affect on real-time performance.  </li>
            <li value="4">To prevent starving the controller, the transformation program must end with a command that causes the task to release its time slice. Issue a DWELL&#160;command with a value of 0.001 at the end of the transformation algorithm.</li>
        </ul>
        <h3 class="relatedTopics" MadCap:autonum=""><span class="autonumber"><span></span></span>Related Topics</h3>
        <p class="relatedTopic"><a href="Commands/CRITICAL%20END_Command.html">CRITICAL END Command</a>
        </p>
        <p class="relatedTopic"><a href="Commands/PROGRAM%20RESTART_Command.html">PROGRAM RESTART Command</a>
        </p>
        <p class="relatedTopic"><a href="Commands/QCOMMAND%20RESET_Command.html">QCOMMAND RESET Command</a>
        </p>
        <p class="relatedTopic"><a href="ms-its:cncoption.chm::/Transformation_Overview.htm" MadCap:wasOriginalLinkAbs_href="true">Transformation Overview</a>
        </p>
        <p class="relatedTopic"><a href="Commands/WAIT_Command.html">WAIT Command</a>
        </p>
        <MadCap:pageFooter class="OddPage">
            <hr color="#006400" width="100%" size="0" align="center" />
            <table style="width: 100%;border-left-style: none;border-left-width: 1px;border-right-style: none;border-right-width: 1px;border-top-style: none;border-top-width: 1px;border-bottom-style: none;border-bottom-width: 1px;margin-left: 0;margin-right: auto;mc-table-style: url('Resources/TableStyles/MasterPage_Footer.css');" class="TableStyle-MasterPage_Footer" cellspacing="0">
                <col class="Column-Column1" />
                <col class="Column-Column2" />
                <tbody>
                    <tr class="Body-Body1">
                        <td class="BodyB-Column1-Body1">
                            <p class="feedback">Was this information helpful?</p><a href="http://help.aerotech.com/feedback/?product=A3200&amp;type=help&amp;id=QCOMMAND_Features_and_Limitations.htm&amp;version=6.04.003&amp;helpful=yes" target="_blank"><div class="feedback"><p>Yes</p></div></a><a href="http://help.aerotech.com/feedback/?product=A3200&amp;type=help&amp;id=QCOMMAND_Features_and_Limitations.htm&amp;version=6.04.003&amp;helpful=no" target="_blank"><div class="feedback"><p>No</p></div></a>
                        </td>
                        <td class="BodyA-Column2-Body1" style="text-align: right;">
                            <p class="footer"><span class="AerotechVariablesCompanyName">Aerotech, Inc.</span>
                            </p>
                            <p class="trademarkandCopyright" style="text-align: right;" MadCap:conditions="AerotechConditions.A3200Only,AerotechConditions.A3200Programming,AerotechConditions.Option_LabVIEWA3200">Copyright <img src="Resources/Images/Header/CopyrightSymbol.png" /> 2001-<span class="AerotechVariablesCurrentYear">2020</span></p>
                            <p class="footer"> All Rights Reserved </p>
                            <p class="footer"><a href="mailto:Support@aerotech.com" target="_blank" title="Support Email Address" alt="Support Email Address">Support@aerotech.com</a>
                            </p>
                            <p class="footer"><a href="http://www.aerotech.com/" target="_blank" title="http://www.aerotech.com" alt="http://www.aerotech.com"><span class="AerotechVariablesWebAddress">www.aerotech.com</span></a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </MadCap:pageFooter>
        <script type="text/javascript" src="SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>