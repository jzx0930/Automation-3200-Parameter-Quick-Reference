<?xml version="1.0" encoding="Windows-1252"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Controller Configuration|Piezo Configuration" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="HtmlHelp" MadCap:PathToHelpSystem="" MadCap:HelpSystemFileName="A3200.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" /><title>Configuring the Servo Loop for a Piezo Stage</title>
        <link href="SkinSupport/Slideshow.css" rel="stylesheet" />
        <link href="SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="Resources/TableStyles/Header.css" rel="stylesheet" />
        <link href="Resources/TableStyles/MasterPage_Footer.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/AerotechHelpStyles.css" rel="stylesheet" />
        <link href="Resources/TableStyles/Header.css" rel="stylesheet" />
        <link href="Resources/TableStyles/Note.css" rel="stylesheet" />
        <link href="Resources/TableStyles/Warning.css" rel="stylesheet" />
        <script src="SkinSupport/jquery.js">
        </script>
        <script src="SkinSupport/MadCapGlobal.js">
        </script>
        <script src="SkinSupport/MadCapSlideshow.js">
        </script>
        <script src="SkinSupport/MadCapMerging.js">
        </script>
        <script src="SkinSupport/MadCapAliasFile.js">
        </script>
        <script src="SkinSupport/MadCapUtilities.js">
        </script>
        <script src="SkinSupport/MadCapEffects.js">
        </script>
        <script src="SkinSupport/MadCapEffectsMenu.js">
        </script>
        <script src="SkinSupport/MadCapBody.js" type="text/javascript">
        </script>
        <script src="SkinSupport/MadCapHighlighter.js" type="text/javascript">
        </script>
    </head>
    <body>
        <script type="text/javascript">
            <!--
			window.onbeforeprint = function(e) {
				var nodes = document.getElementsByTagName("*");
				for (var i = 0; i < nodes.length; i++ ) {			
					if (nodes[i].nodeType == 1)
					{
						var args = nodes[i].attributes;
						for (var j = 0; j < args.length; j++) {
						if ( args[j].name == "MadCap:targetName" )
						{
							nodes[i].setAttribute( "className", "MCTogglerBody" );
						}
						}
					}
				}
			}						
			-->
        </script>
        <table style="width: 100%;margin-left: -7px;margin-right: auto;mc-table-style: url('Resources/TableStyles/Header.css');" cellspacing="0" MadCap:conditions="AerotechConditions.A3200Only" class="TableStyle-Header">
            <col class="TableStyle-Header-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Header-Body-Body1" style="height: 55px;">
                    <td style="background-repeat: no-repeat;vertical-align: top;background-image: url('Resources/Images/Header/Header_A3200.png');background-position-y: top;padding-left: 0px;padding-right: 0px;padding-top: 0px;padding-bottom: 0px;border-left-style: none;border-right-style: none;border-top-style: none;border-bottom-style: none;border-bottom-width: 1px;border-bottom-color: #dae3ea;" class="TableStyle-Header-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_MD_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="Controller_Configuration.htm">Controller Configuration</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink selected" href="#">Piezo Configuration</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Configuring the Servo Loop for a Piezo Stage</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <h1 MadCap:conditions="AerotechConditions.Option_MainA3200" MadCap:autonum=""><span class="autonumber"><span></span></span><a name="kanchor727"></a>Configuring the Servo Loop for a Piezo Stage</h1>
        <p><a name="kanchor728"></a>Piezo stages are very sensitive to payload. You can use the <span class="AerotechVariablesFeature_AutomaticTuning">EasyTune</span> tool in <span class="AerotechVariablesApp_DigScope">Digital Scope</span> to configure the stage and controller settings. Or, you can manually configure the Servo Loop for your stage. </p>
        <p>Before you use <span class="AerotechVariablesFeature_AutomaticTuning">EasyTune</span> or manually configure the Servo Loop, make sure that you do the following.</p>
        <ul>
            <li value="1">Attach the payload to the piezo stage.</li>
            <li MadCap:conditions="AerotechConditions.Option_MainA3200" value="2">Refer to <a href="Piezo_Closed_Loop_Models_Feedback_Only.htm">Closed-Loop Models&#160;(stages with feedback only)</a> to find if it is necessary to use the <span class="procedureTerm">AbsoluteFeedbackOffset Calculator</span>.</li>
            <li value="3">If you are making a new parameter file for your piezo stage, you must correctly configure the <a href="Parameters/PiezoVoltsPerUnit.html" MadCap:conditions="OutputTypeConditions.ScreenOnly">PiezoVoltsPerUnit</a> and <a href="Parameters/CountsPerUnit.html" MadCap:conditions="OutputTypeConditions.ScreenOnly">CountsPerUnit</a> parameters before you continue.</li>
            <li class="noBulletLevel1">
                <table style="mc-table-style: url('Resources/TableStyles/Note.css');margin-left: 0;margin-right: auto;width: 6.5in;" class="TableStyle_Note" cellspacing="0">
                    <col />
                    <tbody>
                        <tr>
                            <td class="TableStyle_Note_Body_0_0_RowEnd_ColEnd">
                                <p><span class="note">NOTE:</span> If you purchased a piezo controller and stage combination, the basic parameter files of the piezo stage are typically configured at the factory. Thus, you do not need to configure the PiezoVoltsPerUnit and CountsPerUnit parameters.</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </li>
        </ul>
        <table style="mc-table-style: url('Resources/TableStyles/Note.css');margin-left: 0;margin-right: auto;width: 6.5in;" class="TableStyle_Note" cellspacing="0">
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_Note_Body_0_0_RowEnd_ColEnd">
                        <p><span class="note">NOTE:</span> You must use <span class="AerotechVariablesFeature_AutomaticTuning">EasyTune</span> or manually configure the servo loop each time that you change the payload or the orientation of the piezo stage. </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 MadCap:autonum=""><span class="autonumber"><span></span></span><span class="AerotechVariablesFeature_AutomaticTuning">EasyTune</span>
        </h2>
        <p MadCap:conditions="AerotechConditions.Option_MainA3200"><span class="AerotechVariablesFeature_AutomaticTuning">EasyTune</span> is a tool that automatically tunes and optimizes an axis. Refer to <a href="DS_EasyTune.htm"><span class="AerotechVariablesFeature_AutomaticTuning">EasyTune</span></a> for more information. </p>
        <h2 MadCap:autonum=""><span class="autonumber"><span></span></span>Manually Configuring the Servo Loop</h2>
        <p MadCap:conditions="AerotechConditions.Option_MainA3200">This procedure shows you how to configure the stage and controller settings for the application that you are using. You can use the <a href="Parameters/GainKsi1.html">GainKsi1</a> and <a href="Parameters/GainKsi2.html">GainKsi2</a> parameters with a piezo stage.</p>
        <h4 class="Procedure" MadCap:autonum=""><span class="autonumber"><span></span></span>To Configure the Servo Loop<a name="kanchor729"></a></h4>
        <ol>
            <li value="1">Open <a href="DS_Digital_Scope_Application.htm" MadCap:conditions="OutputTypeConditions.ScreenOnly"><span MadCap:conditions="OutputTypeConditions.ScreenOnly" class="AerotechVariablesApp_DigScope">Digital Scope</span></a>. </li>
            <li value="2">Turn off the servo loop. The Servo Off icon <img src="Resources/Images/Icons/ServoOff.png" /> shows in <span class="AerotechVariablesApp_DigScope">Digital Scope</span> while the servo loop is off. If this icon does not show, issue the <a href="Commands/SERVO%20ON_OFF_Command.html" MadCap:conditions="OutputTypeConditions.ScreenOnly">SERVO&#160;OFF</a>&#160;command.</li>
            <li value="3">Enable the axis by clicking the <span class="procedureTerm">Enable</span> button <img src="Resources/Images/Icons/EnableDisableAxis16x16.png" /> on the <span class="procedureTerm">Axis</span> toolbar.</li>
            <li value="4">In the <span class="procedureTerm">Loop Transmission</span> tab, select <span class="procedureTerm">Configuration</span> and set the <span class="procedureTerm">Input Type</span> to <span class="procedureTerm">White Noise</span>.</li>
            <li value="5">Type the following settings.</li>
            <ul style="list-style-type: disc;">
                <li value="1"><span class="procedureTerm">Start Freq (Hz)</span> 20 Hz</li>
                <li value="2"><span class="procedureTerm">End Freq (Hz)</span> 4000 Hz</li>
                <li value="3"><span class="procedureTerm"># Averages</span> 8</li>
                <li value="4"><span class="procedureTerm">% Max Voltage</span> 1</li>
                <li class="noBulletLevel1" MadCap:conditions="AerotechConditions.Option_MainA3200">
                    <div class="MCDropDown"><a class="MCDropDownHotSpot_figure_0" href="javascript:void(0);" id="MCDropDownHotSpot_986041576_0" onclick="FMCDropDown( this ); return false;"><img style="border: none;margin-right: 5px;" src="SkinSupport/DropDownClosed.gif" MadCap:altsrc="SkinSupport/DropDownOpen.gif" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( 'SkinSupport/DropDownOpen.gif' ); }" alt="Closed" MadCap:alt2="Open" class="MCDropDownIcon" />
						Figure: Piezo Settings
					</a>
                        <div class="MCDropDownBody_0" id="MCDropDownBody_986041576_0" style="display: none;">
                            <p>
                                <img src="Resources/Images/Image_Piezo_DS_Piezo_Settings.png" />
                            </p>
                        </div>
                    </div>
                </li>
                <li class="noBulletLevel1">
                    <table style="mc-table-style: url('Resources/TableStyles/Warning.css');margin-left: 0;margin-right: auto;width: 6.5in;" class="TableStyle-Warning" cellspacing="0">
                        <col style="width: 66px;" class="TableStyle-Warning-Column-Column1" />
                        <col class="TableStyle-Warning-Column-Column2" />
                        <tbody>
                            <tr class="TableStyle-Warning-Body-Body1">
                                <td class="TableStyle-Warning-BodyB-Column1-Body1">
                                    <p MadCap:conditions="AerotechConditions.Option_MainA3200">
                                        <img src="Resources/Images/Common/Symbol_Warning.png" />
                                    </p>
                                </td>
                                <td class="TableStyle-Warning-BodyA-Column2-Body1">
                                    <p><span class="warning">Warning:</span> Using a value that is too high for <span class="procedureTerm">% Max Voltage</span> can cause permanent damage to the piezo actuator. <span class="AerotechVariablesCompanyName_Short">Aerotech</span> recommends that you do not run a swept-sine loop transmission. If you must run a swept-sine loop transmission, make sure that the servo loop is turned on and start with a very low value for <span class="procedureTerm"> % Max Voltage</span>.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </li>
                <li class="noBulletLevel1" MadCap:conditions="AerotechConditions.Option_MainA3200">
                    <div class="MCDropDown"><a class="MCDropDownHotSpot_figure_0" href="javascript:void(0);" id="MCDropDownHotSpot_986041576_1" onclick="FMCDropDown( this ); return false;"><img style="border: none;margin-right: 5px;" src="SkinSupport/DropDownClosed.gif" MadCap:altsrc="SkinSupport/DropDownOpen.gif" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( 'SkinSupport/DropDownOpen.gif' ); }" alt="Closed" MadCap:alt2="Open" class="MCDropDownIcon" />
                       Figure: Piezo Before You Configure the Servo Loop</a>
                        <div class="MCDropDownBody_0" id="MCDropDownBody_986041576_1" style="display: none;">
                            <p class="img">
                                <img src="Resources/Images/Image_Piezo_BeforeConfiguringServoLoop.png" />
                            </p>
                        </div>
                    </div>
                </li>
            </ul>
            <li value="6">Click the <span class="procedureTerm">Start</span> button <img src="Resources/Images/Icons/Run16x16.png" /> to run an open-loop loop transmission.</li>
            <li value="7">Click the <span class="procedureTerm">Stabilize Piezo</span> button <img src="Resources/Images/Icons/StabilizePiezo16x16.png" /> to put digital filters on resonances and calculate gains for the servo loop. When you click this button, <span class="AerotechVariablesApp_DigScope">Digital Scope</span> clears all digital filters and gains that were previously used.</li>
            <li class="noBulletLevel1">After you use the <span class="procedureTerm">Stabilize Piezo</span> button <img src="Resources/Images/Icons/StabilizePiezo16x16.png" /> to make changes to the servo loop, you might need to do more servo tuning for your specific application.</li>
            <li value="8">If you do not want to make these changes to the servo loop, click the <span class="procedureTerm">Undo</span> button <img src="Resources/Images/Icons/Undo16x16.png" />.</li>
            <li class="noBulletLevel1">To make these changes to the servo loop, click <span class="procedureTerm">Apply</span>.</li>
            <li value="9">On the <span class="procedureTerm">Command</span> toolbar, issue the <a href="Commands/SERVO%20ON_OFF_Command.html" MadCap:conditions="OutputTypeConditions.ScreenOnly">SERVO&#160;ON</a> command.</li>
            <li value="10">Enable the axis again  by clicking the <span class="procedureTerm">Enable</span> button <img src="Resources/Images/Icons/EnableDisableAxis16x16.png" /> on the <span class="procedureTerm">Axis</span> toolbar.</li>
            <li value="11">Run one more loop transmission using either the same loop transmission plot or a new loop transmission plot. If you use the same loop transmission plot, <span class="AerotechVariablesApp_DigScope">Digital Scope</span> overwrites your previous plot. Refer back to <span class="procedureTerm">Steps 2</span> and <span class="procedureTerm">3</span>.</li>
            <li value="12">Click the <span class="procedureTerm">Stabilize Piezo</span> button <img src="Resources/Images/Icons/StabilizePiezo16x16.png" />. <span class="AerotechVariablesApp_DigScope">Digital Scope</span> calculates the digital filters and gains again for the servo loop.</li>
            <li value="13">Make sure that the phase and gain margins are acceptable. Then click <span class="procedureTerm">Apply</span>.</li>
            <li class="noBulletLevel1" MadCap:conditions="AerotechConditions.Option_MainA3200">
                <div class="MCDropDown"><a class="MCDropDownHotSpot_figure_0" href="javascript:void(0);" id="MCDropDownHotSpot_986041576_2" onclick="FMCDropDown( this ); return false;"><img style="border: none;margin-right: 5px;" src="SkinSupport/DropDownClosed.gif" MadCap:altsrc="SkinSupport/DropDownOpen.gif" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( 'SkinSupport/DropDownOpen.gif' ); }" alt="Closed" MadCap:alt2="Open" class="MCDropDownIcon" />
                  Figure: Piezo After You Configure the Servo Loop</a>
                    <div class="MCDropDownBody_0" id="MCDropDownBody_986041576_2" style="display: none;">
                        <p class="img">
                            <img src="Resources/Images/Image_Piezo_AfterConfiguringServoLoop.png" />
                        </p>
                    </div>
                </div>
            </li>
            <li value="14"> Optional. You can optimize the gains and filters by clicking the <span class="procedureTerm">Optimize</span> button <img src="Resources/Images/Icons/Optimize16x16.png" />.</li>
            <li class="noBulletLevel1">Advanced. If you want to configure the filter and optimization settings, click the <span class="procedureTerm">Optimize</span> arrow.</li>
            <li class="noBulletLevel1">The <span class="procedureTerm">Optimize</span> button <img src="Resources/Images/Icons/Optimize16x16.png" /> increases the servo bandwidth to the highest level possible and sets the parallel integral gains by using the <a href="Parameters/GainKsi1.html" MadCap:conditions="OutputTypeConditions.ScreenOnly">GainKsi1</a> and <a href="Parameters/GainKsi2.html" MadCap:conditions="OutputTypeConditions.ScreenOnly">GainKsi2</a> parameters. These integrators improve tracking performance in dynamic applications.</li>
            <li class="noBulletLevel1">If your application requires the fastest move-and-settle times, click the <span class="bold">Optimize</span> button <img src="Resources/Images/Icons/Optimize16x16.png" />. Then in the <span class="procedureTerm">Loop Shaping: Gains</span> toolbar, set the values for <span class="procedureTerm">Ksi1</span> and <span class="procedureTerm">Ksi2</span> to <span class="procedureTerm">0</span>.</li>
            <li value="15">Click the <span class="procedureTerm">Apply and Commit</span> button <img src="Resources/Images/Icons/Save16x16.png" /> to commit your changes to the parameter file.</li>
        </ol>
        <p MadCap:conditions="AerotechConditions.Option_MainA3200">At this time, you have a tuned and stable piezo stage that is ready to do motion. Depending on your application goals, it might be necessary to do more servo tuning optimization. For more information, refer to <a href="DS_Loop_Transmission.htm">Loop Transmission.</a></p>
        <div MadCap:conditions="AerotechConditions.Option_MainA3200">
            <h3 class="relatedTopics" MadCap:autonum=""><span class="autonumber"><span></span></span>Related Topics</h3>
            <p class="relatedTopic"><a href="Parameters/PiezoDefaultServoState.html">PiezoDefaultServoState Parameter</a>
            </p>
            <p class="relatedTopic"><a href="Motion_Composer_Piezo_Configuring_Axis_Manager.htm">Configuring the <span class="AerotechVariablesSimpleName_MotionComposer">Motion Composer</span> Display</a>
            </p>
            <p class="relatedTopic"><a href="Piezo_Closed_Loop_Models_Feedback_Only.htm">Closed-Loop Models (stages with feedback only)</a>
            </p>
        </div>
        <MadCap:pageFooter class="OddPage">
            <hr color="#006400" width="100%" size="0" align="center" />
            <table style="width: 100%;border-left-style: none;border-left-width: 1px;border-right-style: none;border-right-width: 1px;border-top-style: none;border-top-width: 1px;border-bottom-style: none;border-bottom-width: 1px;margin-left: 0;margin-right: auto;mc-table-style: url('Resources/TableStyles/MasterPage_Footer.css');" class="TableStyle-MasterPage_Footer" cellspacing="0">
                <col class="Column-Column1" />
                <col class="Column-Column2" />
                <tbody>
                    <tr class="Body-Body1">
                        <td class="BodyB-Column1-Body1">
                            <p class="feedback">Was this information helpful?</p><a href="http://help.aerotech.com/feedback/?product=A3200&amp;type=help&amp;id=Piezo_Configure_the_Servo_Loop_for_a_Piezo_Stage.htm&amp;version=6.04.003&amp;helpful=yes" target="_blank"><div class="feedback"><p>Yes</p></div></a><a href="http://help.aerotech.com/feedback/?product=A3200&amp;type=help&amp;id=Piezo_Configure_the_Servo_Loop_for_a_Piezo_Stage.htm&amp;version=6.04.003&amp;helpful=no" target="_blank"><div class="feedback"><p>No</p></div></a>
                        </td>
                        <td class="BodyA-Column2-Body1" style="text-align: right;">
                            <p class="footer"><span class="AerotechVariablesCompanyName">Aerotech, Inc.</span>
                            </p>
                            <p class="trademarkandCopyright" style="text-align: right;" MadCap:conditions="AerotechConditions.A3200Only,AerotechConditions.A3200Programming,AerotechConditions.Option_LabVIEWA3200">Copyright <img src="Resources/Images/Header/CopyrightSymbol.png" /> 2001-<span class="AerotechVariablesCurrentYear">2020</span></p>
                            <p class="footer"> All Rights Reserved </p>
                            <p class="footer"><a href="mailto:Support@aerotech.com" target="_blank" title="Support Email Address" alt="Support Email Address">Support@aerotech.com</a>
                            </p>
                            <p class="footer"><a href="http://www.aerotech.com/" target="_blank" title="http://www.aerotech.com" alt="http://www.aerotech.com"><span class="AerotechVariablesWebAddress">www.aerotech.com</span></a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </MadCap:pageFooter>
        <script type="text/javascript" src="SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>